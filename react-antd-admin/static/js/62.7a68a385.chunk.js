(this["webpackJsonpreact-antd-admin"]=this["webpackJsonpreact-antd-admin"]||[]).push([[62],{388:function(e,t,a){"use strict";a.r(t);var n=a(18),c=a(0),o=a.n(c),l=a(759),r=a(714),i=a(85),s=a(15),u=a(42),m=a(46),d=r.DataSet.DataView,p=l.Guide.Html,f=new d,h=function(e){return parseInt((100*e).toString(),10)+"%"},g={percent:{formatter:function(e){return h(e)}}},b=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(u.BegetReactPlaceholder,{type:"textRow",style:{width:360,height:18,margin:"auto"}}),o.a.createElement(u.BegetReactPlaceholder,{type:"rect",style:{width:380,height:372,margin:"26px auto 0"}}))};t.default=function(e){var t=e.title,a=Object(c.useRef)({}),r=Object(m.useFetchStage)(),d=r.loading,E=r.hideLoading,j=Object(c.useState)([]),v=Object(n.a)(j,2),y=v[0],O=v[1],w=Object(c.useState)({atName:"",atValue:0}),k=Object(n.a)(w,2),C=k[0],S=k[1],T=C.atName,G=C.atValue,R=Object(c.useCallback)((function(e){var t=e.name,a=e.value;Object.is(T,t)||S({atName:t,atValue:a})}),[T]),V=Object(c.useCallback)((function(){Object(i.getGoodsSalesInfo)().then((function(e){Object(s.isValidArray)(e)&&(R(e[0]),O(e),E())}))}),[]);return Object(c.useEffect)((function(){V()}),[]),f.source(y).transform({type:"percent",field:"value",dimension:"name",as:"percent"}),o.a.createElement(u.CoverWaitContent,{loading:d,loadingPlaceholder:o.a.createElement(b,null)},t,o.a.createElement(l.Chart,{onGetG2Instance:function(e){a.current=e},onTooltipChange:function(e){var t=e.items[0];R(t.point._origin)},height:379,data:f,scale:g,padding:"auto",forceFit:!0},o.a.createElement(l.Coord,{type:"theta",radius:.75,innerRadius:.6}),o.a.createElement(l.Axis,{name:"percent"}),o.a.createElement(l.Legend,{position:"top",offsetY:10}),o.a.createElement(l.Tooltip,{showTitle:!1,itemTpl:'<li> <span style="background-color:{color};" class="g2-tooltip-marker"> </span>{name}: {value} </li>'}),o.a.createElement(l.Guide,null,o.a.createElement(p,{position:["50%","50%"],html:'<div style="color:#8c8c8c;font-size:1.16em;text-align: center;width: 10em;">\n            '.concat(T,'<br><span style="color:#262626;font-size:2em">').concat(Object(s.numToThousands)(G),"</span>\n            </div>"),alignX:"middle",alignY:"middle"})),o.a.createElement(l.Geom,{type:"intervalStack",position:"percent",color:"name",tooltip:["name*percent",function(e,t){return{name:e,value:h(t)}}],style:{lineWidth:2,stroke:"#fff"}},o.a.createElement(l.Label,{offset:30,content:" ",htmlTemplate:function(e,t){var a=t.color,n=t.point.percent;return'<span style="color:'+a+'">'+h(n)+"</span>"}}))))}}}]);